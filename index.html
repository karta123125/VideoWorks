<!doctype html>
<html lang="zh-tw">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>影片作品展示</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/source-han-rounded/2.001R/SourceHanRoundedCN-Normal.min.css">

<link rel="stylesheet" href="./css/index.css">
  
</head>
<body class="video-page">

  <!-- 頁面載入遮罩（用你自己的動畫檔案） -->
<div id="preloader" aria-hidden="true">
  <!-- 動畫可以是 GIF / APNG / Lottie / 自製 SVG 等 -->
   <video autoplay muted loop playsinline>
    <source src="./img/loading.mp4" type="video/mp4">
  </video>
</div>

  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- 左上角漢堡鈕（固定在頁面） -->
<button class="menu-btn" type="button"
        data-bs-toggle="offcanvas" data-bs-target="#siteMenu"
        aria-controls="siteMenu" aria-label="打開選單">
  <span class="menu-icon"></span>  <!-- 你也可以換成 <img src="./img/hamburger.png" alt=""> -->
</button>

<!-- 側邊滑出選單 -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="siteMenu" aria-labelledby="siteMenuLabel">
  <div class="offcanvas-header">
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="關閉"></button>
  </div>
  <div class="offcanvas-body">
    <nav class="nav flex-column">
      <!-- 兩個分頁（換成你的實際檔名） -->
      <a class="nav-link" href="./index.html">影片作品 VideoWorks</a>
      <a class="nav-link" href="./StaticWorks.html">靜態作品 StaticWorks</a>

      <hr class="my-3">
      <!-- 如果還有頁面或錨點 -->
       
    </nav>
  </div>
</div>

<main>
  <!-- 影片及按鈕區 -->
  <section class="hero-video ero-section">
  <video class="hero-video__bg"
         src="./img/back.mp4"
         autoplay
         muted
         loop
         playsinline   <!-- iOS 行動裝置必要 -->
         poster="./img/hero-poster.jpg"></video>
  
  <div class="container hero text-center">
    <div class="row py-lg-5">
      <div class="col-12">
        <h1>♡♡影片作品♡♡</h1>
        <p class="lead">✧下滑查看更多✧</p>
      </div>
    </div>
  </div>
</section>

  <div class="album py-5 bg-light gallery-section">
    <div class="container">

      <!-- 第一排 -->
      <div class="row align-items-end">
        <div class="col-12 col-md-4 reveal" data-reveal-delay="0s">
          <div class="title-with-bg">
            <h2>‣二次描繪的音樂影片</h2>
          </div>
          <div class="video-preview video-bg-1">
          <div class="ratio ratio-16x9">
            <iframe src="https://www.youtube.com/embed/IK-Tt1hZpjA" title="YouTube video" allowfullscreen></iframe>
          </div>
        </div>  
        </div>
        <!-- 左→右 -->
        <div class="col-12 col-md-2 d-flex flex-column align-items-start reveal" data-reveal-delay=".12s">
            <button class="btn btn-myPink float-btn open-dialog open-right"
                    data-dialog="tplA"
                    data-layout="layout-a"></button>
        </div>
        <!-- 右→左 -->
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-end reveal" data-reveal-delay=".24s">
            <button class="btn btn-myPink2 float-btn open-dialog open-left"
                    data-dialog="tplD"
                    data-layout="layout-d wide-pair"></button>
          </div>
        </div>
        <div class="col-12 col-md-4 reveal" data-reveal-delay=".36s">
          <div class="title-with-bg">
            <h3>‣使用遊戲編輯器製作的MV</h3>
          </div>
          <div class="video-preview video-bg-2">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/XqaHy4izsOY?si=fczkTAYfrAY68QcU" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div> 
        </div>
      </div>

      <!-- 第二排 (可自行加內容) -->
      <div class="row align-items-end mt-5">
        <div class="col-12 col-md-4 reveal" data-reveal-delay="0s">
          <div class="title-with-bg">
            <h2>‣純手繪搞怪短片</h2>
          </div>
          <div class="video-preview video-bg-3">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/45XIWpSGu_g" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div> 
        </div>
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-start reveal" data-reveal-delay=".12s">
            <button class="btn btn-myPink float-btn open-dialog open-right"
                    data-dialog="tplC"
                    data-layout="flex-center"></button>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-end reveal" data-reveal-delay=".24s">
            <button class="btn btn-myPink2 float-btn open-dialog open-left"
                    data-dialog="tplB"
                    data-layout="flex-center"></button>
          </div>
        </div>
        <div class="col-12 col-md-4 reveal" data-reveal-delay=".36s">
          <div class="title-with-bg">
            <h2>‣用AE製作的小動畫</h2>
          </div>
          
           <div class="video-preview video-bg-4">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/ZKlucte6ZRw?si=Ug1DF_davEQyjTyb" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!--==========================================================
  單一對話框（內容動態置換）
==========================================================-->

<!--==========================================================
  各按鈕對應的 template（可無限擴充）
==========================================================-->
<!-- 版面 A：兩欄圖文 -->
<template id="tplA">
  <!-- 圖片 + 右下角文字 -->
  <img src="./img/1.png" class="dialog-img-1" alt="第一張圖">
  <!-- 右下說明文字；與圖片同列同欄 -->
  <p class="img-note">2019年製</p>
  <div class="dialog-text">
    <h3>如何製作</h3>
    <div class="dialog-text-body">
      <p>手繪出圖約400張</p>
      <p>使用剪輯軟體將圖片對上音樂製作而成</p> 
      <p>花了一個月完成此作品</p>
    </div>
  </div>
  <img src="./img/2.png" class="dialog-img-2" alt="第二張圖">
  <p class="full-line">✩此作品為二創，原作為GYARI的
    <a href="https://youtu.be/tyneiz9FRMw?si=ptfd4C8nXEfQ5W0k" 
      target="_blank"
      rel="noopener noreferrer">《アカリがやってきたぞっ》
    </a>
  </p>
</template>

<!-- 版面 B：大圖置中 -->
<template id="tplB">
  <img src="./img/4.png" class="big-img" data-enlarge alt="">
  <h3>如何製作</h3>
  <p class="text-center">學校AE課的作業<br/>用簡單的動畫效果設計成類似遊戲首頁的畫面</p>
  <!-- <p class="text-center">用簡單的動畫效果設計成類似遊戲首頁的畫面</p> -->
  <p class="text-center" 
    style="  font-size:.9rem; margin:0; background:rgba(243, 158, 158, 0.55); color:#572727; 
            padding:2px 6px;border-radius:4px;">2022年製</p>
</template>

<!-- 版面 C：-->
<template id="tplC">
  <img src="./img/3.jpg" style="width:65%;max-width:330px" class="big-img rotate" alt="會旋轉">
  <h3><br/>如何製作</h3>
  <p class="text-center">簡單繪製並剪輯出來的小短片，純屬娛樂</p>
  <p class="text-center"
    style="  font-size:.9rem; margin:0; background:rgba(243, 158, 158, 0.55); color:#572727; 
            padding:2px 6px;border-radius:4px;">2020年製</p>

</template>

<!-- 版面 D：-->
<template id="tplD">
  <div class="intro-text">
    <h3>如何製作</h3><br/>
    <p>從建立人物開始</p>
    <p>調整人物的動作、表情</p>
  </div>
  <img src="./img/8.png" class="intro-img" data-enlarge alt="人物模型示意">

 <!-- 第二、三列：跨欄敘述 -->
  <p class="full-1">到置景物件、光影及鏡頭軌道<br/>創造出心中的一幕幕畫面</p>
  <!-- <p class="full-2">創造出心中的一幕幕畫面</p> -->

  <!-- 第四列：並排 2 圖 + caption -->
  <div class="pair-row">        <!-- ⭐ 包一層 -->
    <figure class="pair">
      <img src="./img/6.png" class="pair-img left-img" data-enlarge alt="表情調整">
      <figcaption>調整人物表情 (示意)</figcaption>
    </figure>
    <figure class="pair">
      <img src="./img/7.png" class="pair-img right-img" data-enlarge alt="動作調整">
      <figcaption>調整人物動作 (示意)</figcaption>
    </figure>
  </div>

  <!-- 第五列：文字 -->
 
  <p class="mid-text"> <br/>最後再剪輯成完整的 MV</p>

  <!-- 第六列：圖 -->
  <img src="./img/5.png" class="mid-img" data-enlarge alt="MV 成品截圖">
  <p class="d-note">2023年製</p>

</template>

<!--==========================================================
  單一對話框（內容動態置換）
==========================================================-->
<div id="sideDialog" class="dialog">
  <button class="close-btn" aria-label="關閉">&times;</button>
  <div class="dialog-body"></div>
</div>

<!-- 點旁邊空白就關閉的背景層 -->
<div id="dialogBackdrop" class="dialog-backdrop" aria-hidden="true"></div>

<!-- Bootstrap Modal 的骨架（點圖放大） -->
<div class="modal fade" id="imgZoomModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <!-- ★ 背景透明，邊框交給 .zoom-frame -->
    <div class="modal-content bg-transparent border-0">
      <!-- ★ 真正有邊框的容器 -->
      <div class="zoom-frame position-relative">
        <img id="imgZoomTarget" class="w-100 rounded-2" alt="zoom image">
        <!-- ★ 自訂關閉鍵 -->
        <button type="button" class="btn-close-custom"
                data-bs-dismiss="modal" aria-label="Close">✕</button>
      </div>
    </div>
  </div>
</div>

<footer class="site-footer">
  <div class="container">
    <div class="row align-items-center">
      <!-- 左欄：留白或之後要放東西 -->
      <div class="col-12 col-md-4 py-2"></div>
      <!-- 中欄：icon1 + 文字（手機置中 / 桌機也置中） -->
      <div class="col-12 col-md-4 text-center py-2">
          <a href="./StaticWorks.html" class="d-inline-block">
            <img src="./img/icon1.png" class="footer-icon rounded mx-auto d-block" alt="...">
          </a>  
          <p class="text-center"><em><small>꙳⋆𓈒𓂂𓏸◌2025𓐍𓏸𓂂⋆♥꙳</small></em></p>
      </div>
      <!-- 右欄：回到最上面（手機置中 / 桌機靠右，並留右邊內距） -->
      <div class="col-12 col-md-4 text-center text-md-end py-2 pe-md-3">
        <a href="#" class="d-inline-block back-to-top">
          <img src="./img/top.png" alt="回到最上面" class="back-to-top-img img-fluid">
        </a>
      </div>
  </div>    

 </footer>

<!--==========================================================
  JavaScript：動態載入 template + 版面
==========================================================-->
<script>
/* ==========================================================
    抓 DOM
   ========================================================== */
const dlg      = document.getElementById('sideDialog');
const dlgBody  = dlg.querySelector('.dialog-body');
const btnClose = dlg.querySelector('.close-btn');
const backdrop = document.getElementById('dialogBackdrop');
const zoomModal  = new bootstrap.Modal('#imgZoomModal');
const zoomTarget = document.getElementById('imgZoomTarget');

/* ==========================================================
    代理監聽所有 .open-dialog 按鈕
   ========================================================== */
document.addEventListener('click', e => {
  const btn = e.target.closest('.open-dialog');
  if (!btn) return;                                    // 點到別的地方 → 忽略

  /* --- 3-1. 抽 template 內容 -------------------------------- */
  const tplId = btn.dataset.dialog;                    // 例如 'tplD'
  const tpl   = document.getElementById(tplId);
  if (!tpl) return;                                    // 找不到 template

  dlgBody.innerHTML = '';                              // 清空舊內容
  dlgBody.append(tpl.content.cloneNode(true));         // 塞新內容

  /* --- 3-2. 加 layout class（支援多個）---------------------- */
  dlgBody.className = 'dialog-body';                   // 先重設
  const layout = btn.dataset.layout;                   // 可能是 "layout-d wide-pair"
  if (layout) dlgBody.classList.add(...layout.split(' '));
  //      ────────↑↑↑↑↑↑↑↑↑↑↑↑↑↑
  // 這一行是唯一需要改動的地方：把字串拆成陣列再展開

  /* --- 3-3. 決定顯示在左邊或右邊 --------------------------- */
  const side = btn.classList.contains('open-left') ? 'left' : 'right';
  openDialog(side);
});

(() => {
  // 觀察設定：稍早一點觸發、目標進入 15% 就算看到
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;

      const el = entry.target;

      // 讀自訂延遲/時長/緩動（可省略）
      const delay   = el.dataset.revealDelay || '0s';
      const dur     = el.dataset.revealDuration || '.8s';
      const easing  = el.dataset.revealEasing || 'ease-out';

      el.style.animationDelay = delay;
      el.style.setProperty('--reveal-duration', dur);
      el.style.setProperty('--reveal-easing', easing);

      el.classList.add('reveal--in');
      obs.unobserve(el); // 只觸發一次
    });
  }, {
    root: null,
    rootMargin: '0px 0px -10% 0px', // 底部提前 10% 停止觀察
    threshold: 0.15
  });

  // 掛上所有要進場的元素
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

  // 簡易 fallback：不支援 IO 就直接顯示
  if (!('IntersectionObserver' in window)) {
    document.querySelectorAll('.reveal').forEach(el => el.classList.add('reveal--in'));
  }
})();

// 1) 一開始標記「正在載入」，避免閃現
document.documentElement.classList.add('is-loading');
document.body.classList.add('is-loading');

window.addEventListener('load', () => {
  const pre = document.getElementById('preloader');
  // 2) 移除禁止捲動
  document.documentElement.classList.remove('is-loading');
  document.body.classList.remove('is-loading');
  // 3) 淡出遮罩
  pre.classList.add('is-hide');
  // 4) 動畫結束後從 DOM 移除
  pre.addEventListener('transitionend', () => pre.remove());
});

// －－ 安全網：若某些資源永遠載不到，N 秒後自動關閉（可選）－－
setTimeout(() => {
  const pre = document.getElementById('preloader');
  if (pre && !pre.classList.contains('is-hide')) {
    document.documentElement.classList.remove('is-loading');
    document.body.classList.remove('is-loading');
    pre.classList.add('is-hide');
  }
}, 8000); // 8 秒自動隱藏，可自行調整

function openDialog(side){
  dlg.classList.remove('zoom-out');
  dlg.style.display = 'block';
  dlg.classList.remove('left', 'right', 'show');
  // 鎖捲動（可保留）
  document.body.classList.add('body-lock');

  // 強制 reflow 後加 show
  dlg.offsetHeight;
  dlg.classList.add(side, 'show');

  // 顯示背景
  backdrop.classList.add('show');
}

function closeDialog(){
  if (dlg.classList.contains('zoom-out')) return; // 已在關閉動畫中就略過
  dlg.classList.remove('show');
  dlg.classList.add('zoom-out');

  // 同步隱藏背景
  backdrop.classList.remove('show');

  dlg.addEventListener('animationend', function h(){
    dlg.removeEventListener('animationend', h);
    dlg.classList.remove('zoom-out', 'left', 'right');
    dlg.style.display = 'none';
    document.body.classList.remove('body-lock'); // 解鎖捲動
  });
}

// 關閉按鈕、ESC 都保留
btnClose.addEventListener('click', closeDialog);
window.addEventListener('keyup', e => { if (e.key === 'Escape') closeDialog(); });

// ★★ 新增：點背景就關閉
backdrop.addEventListener('click', closeDialog);


document.addEventListener('click', e => {
  const pic = e.target.closest('img[data-enlarge]');
  if (!pic) return;

  // 手機不要放大
  if (window.innerWidth <= 768) return;

  zoomTarget.src = pic.src;
  zoomTarget.alt = pic.alt || '';
  zoomModal.show();
});

// 點選單連結後自動關閉 offcanvas（行動裝置體驗）
document.addEventListener('click', (e) => {
  const link = e.target.closest('.offcanvas .nav-link');
  if (!link) return;
  const canvasEl = document.getElementById('siteMenu');
  const offcanvas = bootstrap.Offcanvas.getInstance(canvasEl) || new bootstrap.Offcanvas(canvasEl);
  offcanvas.hide();
});

(() => {
  // 目前頁面的標準化 pathname
  const currPath = new URL(location.href).pathname.replace(/\/+$/, '');

  document.querySelectorAll('#siteMenu .nav-link[href]').forEach(a => {
    const rawHref = a.getAttribute('href');
    if (!rawHref || rawHref.startsWith('#')) return; // 忽略錨點

    // 把 href 轉成絕對 URL，再取 pathname
    const linkPath = new URL(rawHref, location.href).pathname.replace(/\/+$/, '');

    const isCurrIndex = (currPath === '' || currPath === '/' || currPath.endsWith('/index.html'));
    const isLinkIndex = (linkPath === '' || linkPath === '/' || linkPath.endsWith('/index.html'));

    // 判斷首頁 or 其他頁
    if ((isCurrIndex && isLinkIndex) || currPath === linkPath) {
      a.classList.add('active');
    }
  });
})();

</script>

</body>
</html>
