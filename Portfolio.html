<!doctype html>
<html lang="zh-tw">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>影片作品展示</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/source-han-rounded/2.001R/SourceHanRoundedCN-Normal.min.css">

<style>

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-EL.woff2') format('woff2');
  font-weight: 200;  /* ExtraLight */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-L.woff2') format('woff2');
  font-weight: 300;  /* Light */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-R.woff2') format('woff2');
  font-weight: 400;  /* Regular */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-M.woff2') format('woff2');
  font-weight: 500;  /* Medium */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-B.woff2') format('woff2');
  font-weight: 700;  /* Bold */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'GenSenRounded';
  src: url('./fonts/GenSenRounded2TW-H.woff2') format('woff2');
  font-weight: 900;  /* Heavy */
  font-style: normal;
  font-display: swap;
}


.hero{
  position: relative;
  min-height: 100vh;          /* 這裡決定區塊高度，滿版用 100vh */
  display: flex;
  justify-content: center;    /* 水平置中 */
  align-items: center;        /* 垂直置中 */
  text-align: center;
  color: #fff;
}

.hero h1{
  font-family: 'GenSenRounded', 'Noto Sans TC', sans-serif;
  font-weight: 700; /* 用 Bold */
  white-space: nowrap;   /* 不換行 */
  color: #fff;
  font-size: clamp(1.5rem, 4vw, 3rem); /* RWD 字體大小 */
  text-shadow: 12px 12px 12px rgba(0,0,0,0.6);
}

.hero p{
  font-family: 'GenSenRounded', 'Noto Sans TC', sans-serif;
  font-weight: 500; /* 預設 Medium */
  white-space: nowrap;   /* 不換行 */
  color: #fff;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
}

.hero-video{
  position: relative;
  min-height: 60vh; /* 或 100vh */
  color: #fff;
  overflow: clip;   /* 防止捲動露邊 */
}
.hero-video__bg{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;      /* 讓影片滿版裁切 */
  object-position: center;
  z-index: 0;
 filter: blur(1.5px) brightness(0.6);          /* 想加柔焦/暗化可在這裡調 */
}

/* 內容層疊在影片上 */
.hero-video > *:not(.hero-video__bg){ position: relative; z-index: 1; }

/* 太花看不清：加半透明遮罩 */
.hero-video::after{
  content:""; position:absolute; inset:0;
  background: rgba(200, 200, 200, 0.28);
  z-index:1;
}

.gallery-section{
  background: url('./img/TEST1.png') center/cover no-repeat;
  }

/* 進場動畫 */
@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-30px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* 初始狀態：不可見（避免載入時就閃現） */
.reveal {
  opacity: 0;
  transform: translateY(-30px);
}

/* 被觸發後套用動畫；可用 data-reveal-duration/ easing 覆蓋 */
.reveal--in {
  animation: fadeInDown var(--reveal-duration, .8s) var(--reveal-easing, ease-out) forwards;
}

/* 支援使用者偏好：降低動作就直接顯示 */
@media (prefers-reduced-motion: reduce) {
  .reveal { opacity: 1; transform: none; }
  .reveal--in { animation: none; }
}

  /* 文字色彩 -----------------------------------------------------*/
  p{
    font-family: 'Kosugi Maru', 'GenSenRounded', 'Noto Sans TC', sans-serif;
    font-weight: 400;
    color:#952d74}
  h1,h2{
    font-family: 'GenSenRounded', 'Noto Sans TC', sans-serif;
    font-weight: 700;
    color:#572727}
  h3{
    font-family: 'GenSenRounded', 'Noto Sans TC', sans-serif;
    font-weight: 700;
    color: #572727;}

  /* 按鈕顏色 */
.btn-myPink{
  background: url('./img/11.png') center/cover no-repeat;
  border:none;
  padding: 70px 75px;       /* 調整大小 */
  transition: filter .15s, transform .15s;
}
.btn-myPink:hover{
  filter: brightness(1.05);   /* 沒有 hover 圖時，用亮一點代替 */
}

.btn-myPink2{
  background: url('./img/12.png') center/cover no-repeat;
  border:none;
  padding: 70px 75px;       /* 調整大小 */
  transition: filter .15s, transform .15s;
}
.btn-myPink2:hover{
  filter: brightness(1.05);   /* 沒有 hover 圖時，用亮一點代替 */
}

/* 定義飄動動畫 */
@keyframes floatUpDown {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-8px); }  /* 往上移一點 */
  100% { transform: translateY(0); }
}

/* 套用在按鈕上 */
.btn-myPink.float-btn{
  animation: floatUpDown 2.5s ease-in-out infinite;
}

.btn-myPink2.float-btn{
  animation: floatUpDown 2.5s ease-in-out infinite;
}
/* 只改 template 內的超連結，不影響頁面其他地方 */
.layout-a a{
  color:#e765be;
  text-decoration:underline;
}
.layout-a a:hover{
  color:#cf57b0;
}

.title-with-bg{
  display: inline-block;                 /* 讓背景只包住標題，不會佔滿整行 */
  padding: 8px 20px;                     /* 內距，讓背景不要緊貼文字 */
  border-radius: 8px;                    /* 圓角（可選） */
  background: url('./img/10.png') center/cover no-repeat;
  /* 如果要讓圖片依比例放大可以用 contain */
  /* background-size: contain; */
}

/* 影片外框（共用樣式） */
.video-preview{
  position: relative;
  border-radius: 14px;
  padding: 15px;                         /* 讓背景能露出一圈 */
  overflow: hidden;                      /* 讓iframe圓角生效 */
}

/* 讓 iframe 也有圓角 */
.video-preview .ratio,
.video-preview iframe{
  border-radius: 8px;
}

/* ── 四個不同背景（你可以改成自己的圖） ── */
.video-bg-1{
  background: url('./img/9.png') center/cover no-repeat;   /* 有圖就會蓋上去 */
 
}
.video-bg-2{
  background: url('./img/9.png') center/cover no-repeat;
}
.video-bg-3{
  background: url('./img/9.png') center/cover no-repeat;
}
.video-bg-4{
  background: url('./img/9.png') center/cover no-repeat;
}

/* hover 小互動（可選） */
.video-preview:hover{
  filter: brightness(1.02);
  transform: translateY(-1px);
  transition: .18s ease;
}

  /* ─── 對話框基礎 ───────────────────────────────────────────────*/
  @keyframes zoomIn  {from{transform:scale(.5);opacity:0} to{transform:scale(1);opacity:1}}
  @keyframes zoomOut {from{transform:scale(1);opacity:1} to{transform:scale(.5);opacity:0}}
  
  .dialog{
    position:fixed;top:4vh;height:92vh;width:48vw;max-width:600px;
    background:#fff7f7;border:4px solid #7d4747d6;border-radius:12px;
    box-shadow:4px 6px 10px rgba(0,0,0,.15);
    display:none;overflow:hidden;z-index:1055;
  }
  .dialog.show     {display:block;animation:zoomIn .3s forwards}
  .dialog.zoom-out {animation:zoomOut .2s forwards}
  
  .dialog.left  {left:2vw; right:auto;}   /* 左半：與視窗留 2vw 邊距 */
  .dialog.right {right:2vw;left:auto;}   /* 右半：同理 */
  
  /* 關閉鍵 */
  .close-btn{
    position:absolute;top:8px;right:12px;font-size:28px;line-height:1;
    background:transparent;border:none;cursor:pointer
  }
  
  /* 內容可捲動區 (預設流式排版) */
  .dialog-body{
    position:absolute;inset:48px 16px 16px 16px;
    overflow-y:auto;padding-right:8px;
  }
  
  /* ─── ❶ 網格版面（兩行兩列）───────────────────────────────────*/
  .dialog-body.grid-layout{
    display:grid;
    grid-template-columns:1fr 1fr;   /* 兩欄等寬 */
    grid-auto-rows:auto;
    gap:1rem;                        /* 行列間距 */
  }
  
  /* ❷ 特定格子定位 */
  /* ❶ 第一張圖片—維持 70 % 寬、佔第 1 行 */
/* ---- 保持原有設定 ... ---- */

/* ─── layout-a：25% / 75% 兩欄網格 ───────────────────────── */
.layout-a{
  display:grid;
  grid-template-columns:25% 75%;   /* 左 25%、右 75% */
  grid-auto-rows:auto;
  gap:1rem;
}

/* 第一張圖（上排滿欄、寬 70%） */
.layout-a .dialog-img-1{
  grid-column:1 / 3;
  grid-row:1 / 2;
  width:70%;max-width:70%;
  border:10px solid rgba(246, 223, 223, 0.789);border-radius:1.5px;
  box-shadow:
    0 0 0 6px #a6737393;
  /* 裁掉左 +10px，避免露出陰影 */
  clip-path:inset(0 -10px -10px 0 round 8px);
  pointer-events:none;
}

/* 疊在同一格的說明文字 */
.layout-a .img-note{
  grid-column:1 / 3;      /* 與圖片同一區域 → 疊上去 */
  grid-row:1 / 2;
  align-self:end;         /* 貼底 */
  justify-self:end;       /* 靠右 */
  margin:0 70px 15px 0;     /* 右 & 下留 8 px */
  background:rgba(243, 158, 158, 0.55);
  color:#572727;font-size:.85rem;
  padding:2px 6px;border-radius:4px;
  pointer-events:none;    /* 避免擋到圖片點擊 */
}

/* 外層：仍負責定位在 Grid 裡，不給背景 */
.layout-a .dialog-text{
  grid-column:1 / 2;
  grid-row:2 / 3;
}

/* 標題保持透明，只改字距 */
.layout-a .dialog-text h3{
  margin-bottom:.5rem;
}

/* 文字（左下） */ /* 內層：真正的白底＋陰影＋留白 */
.layout-a .dialog-text-body{
  grid-row:2 / 3;
  background:rgba(255, 253, 253, 0.79);;                      /* 讓陰影有對比 */
  border-radius:8px;                    /* 圓角 (可省略) */
  width:100%;
}



/* 第二張圖（右下、95% 寬，再下移 45px） */
.layout-a .dialog-img-2{
  grid-column:2 / 3;
  grid-row:2 / 3;
  width:95%;max-width:95%;
  margin-top:45px;
  border:10px solid rgba(246, 223, 223, 0.789);border-radius:1.5px;
  box-shadow:
    0 0 0 6px #a6737393;
  /* 裁掉左 +10px，避免露出陰影 */
  clip-path:inset(0 -10px -10px 0 round 8px);
  pointer-events:none;
}

/* 跨欄 + 不換行 */
.layout-a .full-line{
  grid-column:1 / 3;     /* 佔滿兩欄 */
  white-space:nowrap;    /* 不自動斷行 */
  margin:4px 0 0;        /* 視覺間距，可自行調整 */
}

/* ⑤ 通用圖片樣式（保留） */
.dialog img{
  max-width:100%;
  border:3px ;
  border-radius:6px;
  margin-bottom:16px;
}


  
  .dialog h3{font-weight:700;margin:24px 0 8px}

 /* ─── 不同版面 class（可再擴充）─────────────────────────────*/

/* A. 兩欄網格 */
.grid-2col{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:1rem;
}

/* B. 置中單欄 */
.flex-center{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:1rem;
}

.flex-center img{
  display:block;                     /* 取消 img 預設行內空白 */
  border:10px solid rgba(246,223,223,.789);
  border-radius:1.5px;
  box-shadow:0 0 0 6px #a6737393;
  clip-path:inset(0 -10px -10px 0 round 8px);
}


/* 無限逆時針旋轉 */
@keyframes spin360 {
  from { transform: rotate(0deg); }
  to   { transform: rotate(-360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* 套用這個 class 就會轉 */
.rotate {
  animation: spin360 12s linear infinite, fadeIn 2.5s ease forwards;   /* 11 秒 轉一圈，可自行改秒數 */
  transform-origin: 50% 50%;               /* 以圖中心為旋轉中心 */
}

.layout-d{
  --pair-left :30%;
  --pair-right:70%;
  display:grid;
  grid-template-columns:var(--pair-left) var(--pair-right);
  gap:1rem;
}


/* ① 第一列 (左文字、右圖) */
.layout-d .intro-text{
  grid-column:1 / 2; grid-row:1 / 2;
}
.layout-d .intro-img{
  grid-column:2 / 3; grid-row:1 / 2;
  width:95%;max-width:95%;
  border-radius:8px;
  border:10px solid rgba(246, 223, 223, 0.789);border-radius:1.5px;
  box-shadow:
    0 0 0 6px #a6737393;
  /* 裁掉左 +10px，避免露出陰影 */
  clip-path:inset(0 -10px -10px 0 round 8px);
}

/* ② 跨欄敘述 (第 2、3 列) */
.layout-d .full-1{ grid-column:1 / 3; grid-row:2 / 3;}
.layout-d .full-2{ grid-column:1 / 3; grid-row:3 / 4;}

/* (1) 把整個 .pair-row 定位到第 4 列，跨滿兩欄 */
.layout-d .pair-row{
  grid-column:1 / 3;   /* 跨兩欄 */
  grid-row:4 / 5;      /* 就是原本第 4 列 */
}

/* (2) 在它自己裡面再開一張 50 / 50 的 Grid */
.layout-d .pair-row{
  display:grid;
  grid-template-columns:50% 50%;   /* 想要的比例 */
  gap:1rem;
}

/* 讓每個 <figure> 變成 flex 直排，caption 貼底 */
.layout-d .pair{
  display:flex;
  flex-direction:column;
  justify-content:flex-end;  /* 把子元素往底端推 */
  margin:0;                  /* 把預設 1em margin 清掉 */
}

.layout-d .pair img{
  border:10px solid rgba(246, 223, 223, 0.789);border-radius:1.5px;
  box-shadow: 0 0 0 6px #a6737393;
  /* 裁掉左 +10px，避免露出陰影 */
  clip-path:inset(0 -10px -10px 0 round 8px);
  margin-bottom:.4rem;  
}

.layout-d .left-img{
  width:100%;
}

.layout-d .right-img{
  width:100%;
  display:block;
  margin:0 auto;        /* 置中 */
}

/* 圖下的說明文字 */
.layout-d .pair figcaption{
  font-size:.85rem; margin-top:.4rem;
}

/* ④ 第 5 列：左文字、右圖 */
.layout-d .mid-text{ grid-column:1 / 3; grid-row:5 / 6; }
.layout-d .mid-img {
  grid-column:1 / 3;   /* 跨滿左 + 右 */
  grid-row:6 / 7;      /* 新列次序 */
  width:80%;           /* 自行決定大小 */
  max-width:100%;
  justify-self:center; /* 水平置中 */
  align-self:center;   /* 垂直置中（可要可不要） */
  border:10px solid rgba(246, 223, 223, 0.789);border-radius:1.5px;
  box-shadow: 0 0 0 6px #a6737393;
  /* 裁掉左 +10px，避免露出陰影 */
  clip-path:inset(0 -10px -10px 0 round 8px);
}

/* ⑤ 右下角備註 */
.layout-d .d-note{
  grid-column:1 / 3;
  grid-row:7 / 8; 
  justify-self:center; /* 水平置中 */
  font-size:.9rem; margin:0;
  background:rgba(243, 158, 158, 0.55);
  color:#572727;
  padding:2px 6px;border-radius:4px;
}

/* 所有可放大圖片：預設顯示小放大鏡游標 */
img[data-enlarge]{
  cursor: zoom-in;          /* 大部分瀏覽器都有這個圖示 */
  transition: filter .2s;   /* 順手加個微亮效果 */
}

/* 滑過時再亮一點，讓使用者更確定可以點 */
img[data-enlarge]:hover{
  filter: brightness(1.07);
}

/* ─── Zoom 邊框 ─────────────────────────────────────────── */
.zoom-frame{
  border:3px solid #f3acc5;         /* 粉紅邊框 */
  border-radius:10px;                /* 圓角 */
  box-shadow:0 0 0 2px #f9b4b4;    /* 第 2 層陰影 */
}
/* ─── 關閉鍵 ───────────────────────────────────────────── */
.btn-close-custom{
  position:absolute;                 /* 固定在右上 */
  top:-5px; right:-55px;            /* 稍微凸出邊框 */
  width:40px; height:40px;
  border:4px solid #f3acc5;
  border-radius:50%;
  background:#f3acc5;
  color:#ffffff;
  font-size:1.5rem;                  /* ✕ 字稍大 */
  line-height:1;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
  transition:background .15s, color .15s;
}


</style>
  
</head>
<body>
  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<main>
  <!-- 影片及按鈕區 -->
  <section class="hero-video ero-section">
  <video class="hero-video__bg"
         src="./img/back.mp4"
         autoplay
         muted
         loop
         playsinline   <!-- iOS 行動裝置必要 -->
         poster="./img/hero-poster.jpg"></video>
  
  <div class="container hero text-center">
    <div class="row py-lg-5">
      <div class="col-12">
        <h1>♡♡影片作品♡♡</h1>
        <p class="lead">✧下滑查看更多✧</p>
      </div>
    </div>
  </div>
</section>

  <div class="album py-5 bg-light gallery-section">
    <div class="container">

      <!-- 第一排 -->
      <div class="row align-items-end">
        <div class="col-12 col-md-4 reveal" data-reveal-delay="0s">
          <div class="title-with-bg">
            <h2>‣二次描繪的音樂影片</h2>
          </div>
          <div class="video-preview video-bg-1">
          <div class="ratio ratio-16x9">
            <iframe src="https://www.youtube.com/embed/IK-Tt1hZpjA" title="YouTube video" allowfullscreen></iframe>
          </div>
        </div>  
        </div>
        <!-- 左→右 -->
        <div class="col-12 col-md-2 d-flex flex-column align-items-start reveal" data-reveal-delay=".12s">
            <button class="btn btn-myPink float-btn open-dialog open-right"
                    data-dialog="tplA"
                    data-layout="layout-a"></button>
        </div>
        <!-- 右→左 -->
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-end reveal" data-reveal-delay=".24s">
            <button class="btn btn-myPink2 float-btn open-dialog open-left"
                    data-dialog="tplD"
                    data-layout="layout-d wide-pair"></button>
          </div>
        </div>
        <div class="col-12 col-md-4 reveal" data-reveal-delay=".36s">
          <div class="title-with-bg">
            <h3>‣使用遊戲編輯器製作的MV</h3>
          </div>
          <div class="video-preview video-bg-2">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/XqaHy4izsOY?si=fczkTAYfrAY68QcU" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div> 
        </div>
      </div>

      <!-- 第二排 (可自行加內容) -->
      <div class="row align-items-end mt-5">
        <div class="col-12 col-md-4 reveal" data-reveal-delay="0s">
          <div class="title-with-bg">
            <h2>‣純手繪搞怪短片</h2>
          </div>
          <div class="video-preview video-bg-3">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/45XIWpSGu_g" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div> 
        </div>
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-start reveal" data-reveal-delay=".12s">
            <button class="btn btn-myPink float-btn open-dialog open-right"
                    data-dialog="tplC"
                    data-layout="flex-center"></button>
          </div>
        </div>
        <div class="col-12 col-md-2">
          <div class="d-flex flex-column align-items-end reveal" data-reveal-delay=".24s">
            <button class="btn btn-myPink2 float-btn open-dialog open-left"
                    data-dialog="tplB"
                    data-layout="flex-center"></button>
          </div>
        </div>
        <div class="col-12 col-md-4 reveal" data-reveal-delay=".36s">
          <div class="title-with-bg">
            <h2>‣用AE製作的小動畫</h2>
          </div>
          
           <div class="video-preview video-bg-4">
            <div class="ratio ratio-16x9">
              <iframe src="https://www.youtube.com/embed/ZKlucte6ZRw?si=Ug1DF_davEQyjTyb" title="YouTube video" allowfullscreen></iframe>
            </div>
           </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!--==========================================================
  單一對話框（內容動態置換）
==========================================================-->
<div id="sideDialog" class="dialog">
  <button class="close-btn" aria-label="關閉">&times;</button>
  <div class="dialog-body"></div>
</div>

<!--==========================================================
  各按鈕對應的 template（可無限擴充）
==========================================================-->
<!-- 版面 A：兩欄圖文 -->
<template id="tplA">
  <!-- 圖片 + 右下角文字 -->
  <img src="./img/1.png" class="dialog-img-1" alt="第一張圖">
  <!-- 右下說明文字；與圖片同列同欄 -->
  <p class="img-note">2019年製</p>
  <div class="dialog-text">
    <h3>如何製作</h3>
    <div class="dialog-text-body">
      <p>手繪出圖約400張</p>
      <p>使用剪輯軟體將圖片對上音樂製作而成</p> 
      <p>花了一個月完成此作品</p>
    </div>
  </div>
  <img src="./img/2.png" class="dialog-img-2" alt="第二張圖">
  <p class="full-line">✩此作品為二創，原作為GYARI的
    <a href="https://youtu.be/tyneiz9FRMw?si=ptfd4C8nXEfQ5W0k" 
      target="_blank"
      rel="noopener noreferrer">《アカリがやってきたぞっ》
    </a>
  </p>
</template>

<!-- 版面 B：大圖置中 -->
<template id="tplB">
  <img src="./img/4.png" class="big-img" data-enlarge alt="">
  <h3>如何製作</h3>
  <p class="text-center">學校AE課的作業<br/>用簡單的動畫效果設計成類似遊戲首頁的畫面</p>
  <!-- <p class="text-center">用簡單的動畫效果設計成類似遊戲首頁的畫面</p> -->
  <p class="text-center" 
    style="  font-size:.9rem; margin:0; background:rgba(243, 158, 158, 0.55); color:#572727; 
            padding:2px 6px;border-radius:4px;">2022年製</p>
</template>

<!-- 版面 C：-->
<template id="tplC">
  <img src="./img/3.jpg" style="width:65%;max-width:330px" class="big-img rotate" alt="會旋轉">
  <h3><br/>如何製作</h3>
  <p class="text-center">簡單繪製並剪輯出來的小短片，純屬娛樂</p>
  <p class="text-center"
    style="  font-size:.9rem; margin:0; background:rgba(243, 158, 158, 0.55); color:#572727; 
            padding:2px 6px;border-radius:4px;">2020年製</p>
  </div>
</template>

<!-- 版面 D：-->
<template id="tplD">
  <div class="intro-text">
    <h3>如何製作</h3><br/>
    <p>從建立人物開始</p>
    <p>調整人物的動作、表情</p>
  </div>
  <img src="./img/8.png" class="intro-img" data-enlarge alt="人物模型示意">

 <!-- 第二、三列：跨欄敘述 -->
  <p class="full-1">到置景物件、光影及鏡頭軌道<br/>創造出心中的一幕幕畫面</p>
  <!-- <p class="full-2">創造出心中的一幕幕畫面</p> -->

  <!-- 第四列：並排 2 圖 + caption -->
  <div class="pair-row">        <!-- ⭐ 包一層 -->
    <figure class="pair">
      <img src="./img/6.png" class="pair-img left-img" data-enlarge alt="表情調整">
      <figcaption>調整人物表情 (示意)</figcaption>
    </figure>
    <figure class="pair">
      <img src="./img/7.png" class="pair-img right-img" data-enlarge alt="動作調整">
      <figcaption>調整人物動作 (示意)</figcaption>
    </figure>
  </div>

  <!-- 第五列：文字 -->
 
  <p class="mid-text"> <br/>最後再剪輯成完整的 MV</p>

  <!-- 第六列：圖 -->
  <img src="./img/5.png" class="mid-img" data-enlarge alt="MV 成品截圖">
  <p class="d-note">2023年製</p>

</template>

<!--==========================================================
  單一對話框（內容動態置換）
==========================================================-->
<div id="sideDialog" class="dialog">
  <button class="close-btn" aria-label="關閉">&times;</button>
  <div class="dialog-body"></div>
</div>

<!-- Bootstrap Modal 的骨架（點圖放大） -->
<div class="modal fade" id="imgZoomModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <!-- ★ 背景透明，邊框交給 .zoom-frame -->
    <div class="modal-content bg-transparent border-0">
      <!-- ★ 真正有邊框的容器 -->
      <div class="zoom-frame position-relative">
        <img id="imgZoomTarget" class="w-100 rounded-2" alt="zoom image">
        <!-- ★ 自訂關閉鍵（大一點、粉一點） -->
        <button type="button" class="btn-close-custom"
                data-bs-dismiss="modal" aria-label="Close">✕</button>
      </div>
    </div>
  </div>
</div>

<!--==========================================================
  JavaScript：動態載入 template + 版面
==========================================================-->
<script>
/* ==========================================================
   1. 抓 DOM
   ========================================================== */
const dlg      = document.getElementById('sideDialog');
const dlgBody  = dlg.querySelector('.dialog-body');
const btnClose = dlg.querySelector('.close-btn');

/* ==========================================================
   2. 開 / 關 Dialog 的小函式
   ========================================================== */
function openDialog(side){
  dlg.classList.remove('zoom-out');
  dlg.style.display = 'block';
  dlg.classList.remove('left', 'right', 'show');
  dlg.offsetHeight;                      // 強制 reflow
  dlg.classList.add(side, 'show');
}

function closeDialog(){
  if (dlg.classList.contains('zoom-out')) return;   // 已在關閉動畫中
  dlg.classList.remove('show');
  dlg.classList.add('zoom-out');
  dlg.addEventListener('animationend', function h(){
    dlg.removeEventListener('animationend', h);
    dlg.classList.remove('zoom-out', 'left', 'right');
    dlg.style.display = 'none';
  });
}
btnClose.addEventListener('click', closeDialog);
window.addEventListener('keyup', e => { if (e.key === 'Escape') closeDialog(); });

/* ==========================================================
   3. 代理監聽所有 .open-dialog 按鈕
   ========================================================== */
document.addEventListener('click', e => {
  const btn = e.target.closest('.open-dialog');
  if (!btn) return;                                    // 點到別的地方 → 忽略

  /* --- 3-1. 抽 template 內容 -------------------------------- */
  const tplId = btn.dataset.dialog;                    // 例如 'tplD'
  const tpl   = document.getElementById(tplId);
  if (!tpl) return;                                    // 找不到 template

  dlgBody.innerHTML = '';                              // 清空舊內容
  dlgBody.append(tpl.content.cloneNode(true));         // 塞新內容

  /* --- 3-2. 加 layout class（支援多個）---------------------- */
  dlgBody.className = 'dialog-body';                   // 先重設
  const layout = btn.dataset.layout;                   // 可能是 "layout-d wide-pair"
  if (layout) dlgBody.classList.add(...layout.split(' '));
  //      ────────↑↑↑↑↑↑↑↑↑↑↑↑↑↑
  // 這一行是唯一需要改動的地方：把字串拆成陣列再展開

  /* --- 3-3. 決定顯示在左邊或右邊 --------------------------- */
  const side = btn.classList.contains('open-left') ? 'left' : 'right';
  openDialog(side);
});

/* －－－放大圖片（寫在你原本 script 之後即可）－－－*/
const zoomModal   = new bootstrap.Modal('#imgZoomModal');
const zoomTarget  = document.getElementById('imgZoomTarget');

document.addEventListener('click', e => {
  const pic = e.target.closest('img[data-enlarge]');
  if (!pic) return;                        // 點的不是可放大圖片 → 忽略

  zoomTarget.src = pic.src;                // 換成點到的圖片
  zoomTarget.alt = pic.alt || '';          // alt 也帶過去
  zoomModal.show();                        // 開 modal
});

(() => {
  // 觀察設定：稍早一點觸發、目標進入 15% 就算看到
  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;

      const el = entry.target;

      // 讀自訂延遲/時長/緩動（可省略）
      const delay   = el.dataset.revealDelay || '0s';
      const dur     = el.dataset.revealDuration || '.8s';
      const easing  = el.dataset.revealEasing || 'ease-out';

      el.style.animationDelay = delay;
      el.style.setProperty('--reveal-duration', dur);
      el.style.setProperty('--reveal-easing', easing);

      el.classList.add('reveal--in');
      obs.unobserve(el); // 只觸發一次
    });
  }, {
    root: null,
    rootMargin: '0px 0px -10% 0px', // 底部提前 10% 停止觀察
    threshold: 0.15
  });

  // 掛上所有要進場的元素
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

  // 簡易 fallback：不支援 IO 就直接顯示
  if (!('IntersectionObserver' in window)) {
    document.querySelectorAll('.reveal').forEach(el => el.classList.add('reveal--in'));
  }
})();

</script>

</body>
</html>
